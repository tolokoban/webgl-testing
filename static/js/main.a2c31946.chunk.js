(this["webpackJsonpwebgl-testing"]=this["webpackJsonpwebgl-testing"]||[]).push([[0],{17:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV/TlopUBC0o4pChOlkQFXHUKhShQqgVWnUwufQLmjQkLS6OgmvBwY/FqoOLs64OroIg+AHi5Oik6CIl/i8ptIjx4Lgf7+497t4BQqPMNCswDmh61Uwl4mImuyqGXhHEAPogIiAzy5iTpCQ8x9c9fHy9i/Es73N/jh41ZzHAJxLPMsOsEm8QT29WDc77xBFWlFXic+Ixky5I/Mh1xeU3zgWHBZ4ZMdOpeeIIsVjoYKWDWdHUiKeIo6qmU76QcVnlvMVZK9dY6578heGcvrLMdZrDSGARS5CoIwU1lFBGFTFadVIspGg/7uEfcvwSuRRylcDIsYAKNMiOH/wPfndr5Scn3KRwHAi+2PbHCBDaBZp12/4+tu3mCeB/Bq70tr/SAGY+Sa+3tegR0LsNXFy3NWUPuNwBBp8M2ZQdyU9TyOeB9zP6pizQfwt0r7m9tfZx+gCkqavkDXBwCIwWKHvd491dnb39e6bV3w83Y3KPBkDkrQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+QFFxIrHU779cwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA+ElEQVQY0wXBTUoCcQDG4d/gYGTRXnAVEe1s0QWijUeIoBPksiO0i+gIQWUgtAj7AG0RVEQShFk2TTlOk/xRpI8hHauFvj2PFXUjheEnnU6bpjG8eD6u6+A4LkEQYJ9HCQqtBDvVMXqlU/x8nOvGPSMPFf5OfkDFLWlxUpU5tJlC+t6VvGmFRXS8gWzGC5AxpBsQ80BXT7RfZ3DuulT9FpYeL4WpQ7PEe7fFYdnHBB88tyMq/SHWoCYNajA8Am+7jrU/xc0euGc9br9ysHIgpdYklstiNqslZTXRQaPrKLaA7Ew6JBn3qf5e4Jo3co1VMPP07Tr5ZMg/fZKNCEDKD+MAAAAASUVORK5CYII="},19:function(t,e,r){t.exports=r.p+"static/media/perspective.world-point-to-screen.c20b4adb.vert"},20:function(t,e,r){t.exports=r.p+"static/media/model.main.0394a779.frag"},21:function(t,e,r){t.exports=r.p+"static/media/model.main.6fa5d353.vert"},22:function(t,e,r){t.exports=r(60)},57:function(t,e,r){},59:function(t,e,r){},60:function(t,e,r){"use strict";r.r(e);var n=r(9),a=r(0),i=r.n(a),o=r(13),s=r.n(o),c=(r(57),r(2)),u=r.n(c),f=r(4),h=r(1),l=r(3),v=r(8),d=r(7),m=function(){function t(e){var r=this;Object(h.a)(this,t),this._x=0,this._y=0,this._down=!1,this._downTime=0,this._eventDown=!1,this._eventUp=!1,this.canvas=void 0,this.onMouseMove=function(t){r.computeCoords(t.clientX,t.clientY)},this.onTouchMove=function(t){var e=t.touches[0];r.computeCoords(e.clientX,e.clientY)},this.onMouseDown=function(t){r.onDown(t.clientX,t.clientY)},this.onTouchStart=function(t){var e=t.touches[0];r.onDown(e.clientX,e.clientY)},this.onMouseUp=function(t){r.onUp(t.clientX,t.clientY)},this.onTouchEnd=function(t){var e=t.touches[0];r.onUp(e.clientX,e.clientY)},this.canvas=e,window.addEventListener("mousemove",this.onMouseMove,!0),window.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mousedown",this.onMouseDown,!0),window.addEventListener("touchstart",this.onTouchStart,!0),window.addEventListener("mouseup",this.onMouseUp,!0),window.addEventListener("touchend",this.onTouchEnd,!0)}return Object(l.a)(t,[{key:"reset",value:function(){this._eventDown=!1,this._eventUp=!1}},{key:"onDown",value:function(t,e){0===this._downTime&&(this.computeCoords(t,e),this._down=!0,this._eventDown=!0,this._downTime=Date.now())}},{key:"onUp",value:function(t,e){0!==this._downTime&&(this.computeCoords(t,e),this._down=!1,this._eventUp=!0,this._downTime=0)}},{key:"computeCoords",value:function(t,e){var r=this.canvas.getBoundingClientRect(),n=t-r.left,a=e-r.top,i=r.width,o=r.height;this._x=2*(n/i-.5),this._y=2*(a/o-.5)}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"down",get:function(){return this._down}},{key:"eventUp",get:function(){return this._eventUp}},{key:"eventDown",get:function(){return this._eventDown}}]),t}(),p={loadImage:function(t){return new Promise((function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=function(){console.error("Unable to load image from URL:",t),r(t)},n.src=t}))},loadJson:function(t){return A.apply(this,arguments)},loadText:g};function g(t){return T.apply(this,arguments)}function T(){return(T=Object(f.a)(u.a.mark((function t(e){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:return r=t.sent,t.next=6,r.text();case 6:return n=t.sent,t.abrupt("return",n);case 10:throw t.prev=10,t.t0=t.catch(0),console.error("Unable to load text from URL:",e),console.error(t.t0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function A(){return(A=Object(f.a)(u.a.mark((function t(e){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e);case 2:return r=t.sent,t.prev=3,t.abrupt("return",JSON.parse(r));case 7:throw t.prev=7,t.t0=t.catch(3),console.error("Unable to parse JSON:",e),console.error(t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[3,7]])})))).apply(this,arguments)}var E,b,y,_=function(t){Object(v.a)(r,t);var e=Object(d.a)(r);function r(t){var n;Object(h.a)(this,r),(n=e.call(this,t.gl,t.id,"2d")).params=t;var a=t.gl,i=t.linear?a.LINEAR:a.NEAREST;return a.bindTexture(a.TEXTURE_2D,n.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,i),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,t.source),n}return Object(l.a)(r,[{key:"update",value:function(t){var e=this.params.gl;e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t)}},{key:"width",get:function(){return this.params.width}},{key:"height",get:function(){return this.params.height}}]),r}(function(){function t(e,r,n){Object(h.a)(this,t),this.gl=e,this.id=r,this.sharingCounter=0,this._isDestroyed=!1,this.texture=void 0,this.target=void 0,this.units=void 0;var a=e.createTexture();if(!a)throw Error('[FlatLand] Unable to create texture "'.concat(r,'"!'));switch(this.texture=a,n){case"2d":this.target=e.TEXTURE_2D;break;case"cubeMap":this.target=e.TEXTURE_CUBE_MAP;break;default:throw Error('[FlatLand.Texture] Unknow target "'.concat(n,'"! Available targets are "2d", "cubeMap", "3d" and "2dArray".'))}this.units=[e.TEXTURE0,e.TEXTURE1,e.TEXTURE2,e.TEXTURE3,e.TEXTURE4,e.TEXTURE5,e.TEXTURE6,e.TEXTURE7,e.TEXTURE8,e.TEXTURE9,e.TEXTURE10,e.TEXTURE11,e.TEXTURE12,e.TEXTURE13,e.TEXTURE14,e.TEXTURE15]}return Object(l.a)(t,[{key:"share",value:function(){this.sharingCounter++}},{key:"destroy",value:function(){if(!this._isDestroyed)if(this.sharingCounter>0)this.sharingCounter--;else{var t=this.gl,e=this.texture;t.deleteTexture(e),this._isDestroyed=!0}}},{key:"attachToUnit",value:function(t){var e=this.gl,r=this.texture,n=this.target,a=this.units;if(t<0)throw Error("[FlatLand.Texture.attachToUnit] unitIndex must be positive!");if(t>a.length-1)throw Error("[FlatLand.Texture.attachToUnit] unitIndex must be lower than ".concat(a.length,"!"));e.activeTexture(a[t]),e.bindTexture(n,r)}},{key:"isDestroyed",get:function(){return this._isDestroyed}}]),t}()),O=function(){function t(e){Object(h.a)(this,t),this.gl=e}return Object(l.a)(t,[{key:"createImageTextureAsync",value:function(){var t=Object(f.a)(u.a.mark((function t(e){var r,n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.gl,t.next=3,p.loadImage(e);case 3:return n=t.sent,a=new _({gl:r,id:e,source:n,width:n.width,height:n.height,linear:!1}),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),w=function(){function t(e){var r=this;Object(h.a)(this,t),this.resolution=1,this.onAnimation=void 0,this._gl=void 0,this._pointer=void 0,this._isRendering=!1,this.lastRenderingTime=0,this.textures=void 0,this.render=function(t){if(r._isRendering){window.requestAnimationFrame(r.render);var e=r.gl,n=r.lastRenderingTime;if(r.lastRenderingTime=t,0!==n){!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e<=0?window.devicePixelRatio:e,n=t.canvas;if(n instanceof HTMLCanvasElement){var a=Math.floor(n.clientWidth*r),i=Math.floor(n.clientHeight*r);if(n.width!==a||n.height!==i)return n.width=a,n.height=i,t.viewport(0,0,a,i),!0}}(e,r.resolution),e.clearDepth(1),e.clear(e.DEPTH_BUFFER_BIT),e.depthFunc(e.LESS),e.disable(e.DEPTH_TEST);try{var a=r.onAnimation;if("function"===typeof a)a(t,e.drawingBufferWidth,e.drawingBufferHeight),r.pointer.reset()}catch(i){r._isRendering=!1,console.error("##################################"),console.error("# Rendering   has  been  stopped #"),console.error("# because of the following error #"),console.error("#################################"),console.error(i)}}}},this._pointer=new m(e);var n=e.getContext("webgl2",{});if(!n)throw new Error("Unable to create a WegGL context!");this._gl=n,this.textures=new O(n)}return Object(l.a)(t,[{key:"refresh",value:function(){var t=this._isRendering,e=this.lastRenderingTime;this._isRendering=!0;var r=Date.now();this.lastRenderingTime=r-15,this.render(r),this._isRendering=t,this.lastRenderingTime=e}},{key:"isRendering",get:function(){return this._isRendering},set:function(t){t!==this._isRendering&&(this._isRendering=t,t&&window.requestAnimationFrame(this.render))}},{key:"gl",get:function(){return this._gl}},{key:"pointer",get:function(){return this._pointer}},{key:"width",get:function(){return this._gl.drawingBufferWidth}},{key:"height",get:function(){return this._gl.drawingBufferHeight}}]),t}(),M=r(6),x=r(14),L=function(){function t(e){if(Object(h.a)(this,t),this.gl=void 0,this.buffer=void 0,this.program=void 0,this.texture=void 0,this.attributesCount=void 0,this.name=void 0,!e.buffer)throw Error("'buffer' is not defined!");console.info("params=",e),this.gl=e.gl,this.name=e.name,this.buffer=e.buffer,this.program=e.program,this.texture=e.texture,this.attributesCount=e.attributesCount}return Object(l.a)(t,[{key:"paint",value:function(){var t=this.gl,e=this.buffer,r=this.program,n=this.texture,a=this.attributesCount;r.use(),n.attachToUnit(0),r.uniforms.set("uniTexture",0),r.uniforms.set("uniThickness",.05),r.uniforms.set("uniSmoothness",.05),r.bindAttribs(e),t.drawArrays(t.TRIANGLES,0,a)}}]),t}(),F=function(){function t(){Object(h.a)(this,t),this.map=new Map}return Object(l.a)(t,[{key:"exists",value:function(t){var e=this.map;if(e.has(t)){var r=e.get(t);return r&&r.count++,!0}return!1}},{key:"get",value:function(t){var e=this.map.get(t);if(e)return e.value}},{key:"add",value:function(t,e){if(this.map.get(t))throw Error('An item with id "'.concat(t,'" already exists!'));this.map.set(t,{count:1,value:e})}},{key:"remove",value:function(t){var e=this.map.get(t);return e?(e.count--,e.count<=0&&this.map.delete(t),e.count):-1}}]),t}(),k=r(5),R=r(15);!function(t){t[t.FLOAT=0]="FLOAT",t[t.FLOAT_VEC2=1]="FLOAT_VEC2",t[t.FLOAT_VEC3=2]="FLOAT_VEC3",t[t.FLOAT_VEC4=3]="FLOAT_VEC4"}(E||(E={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.FLOAT_VEC2=1]="FLOAT_VEC2",t[t.FLOAT_VEC3=2]="FLOAT_VEC3",t[t.FLOAT_VEC4=3]="FLOAT_VEC4",t[t.FLOAT_MAT2=4]="FLOAT_MAT2",t[t.FLOAT_MAT3=5]="FLOAT_MAT3",t[t.FLOAT_MAT4=6]="FLOAT_MAT4",t[t.BYTE=7]="BYTE",t[t.UNSIGNED_BYTE=8]="UNSIGNED_BYTE",t[t.SHORT=9]="SHORT",t[t.UNSIGNED_SHORT=10]="UNSIGNED_SHORT",t[t.INT=11]="INT",t[t.UNSIGNED_INT=12]="UNSIGNED_INT",t[t.BOOL=13]="BOOL",t[t.SAMPLER_2D=14]="SAMPLER_2D",t[t.SAMPLER_CUBE=15]="SAMPLER_CUBE"}(b||(b={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.FLOAT_VEC2=1]="FLOAT_VEC2",t[t.FLOAT_VEC3=2]="FLOAT_VEC3",t[t.FLOAT_VEC4=3]="FLOAT_VEC4",t[t.FLOAT_MAT2=4]="FLOAT_MAT2",t[t.FLOAT_MAT3=5]="FLOAT_MAT3",t[t.FLOAT_MAT4=6]="FLOAT_MAT4"}(y||(y={}));var U={getAttributeSize:function(t){switch(t){case E.FLOAT_VEC2:return 2;case E.FLOAT_VEC3:return 3;case E.FLOAT_VEC4:return 4;default:return 1}},getAttributeTypeCodeName:function(t){return S.get(t)},getUniformTypeCodeName:function(t){return j.get(t)},getVaryingTypeCodeName:function(t){return C.get(t)},getWebGLTypeFromAttributeType:function(t,e){switch(e){case E.FLOAT_VEC2:return t.FLOAT_VEC2;case E.FLOAT_VEC3:return t.FLOAT_VEC3;case E.FLOAT_VEC4:return t.FLOAT_VEC4;default:return t.FLOAT}}};var S=new Map;S.set(E.FLOAT,"float"),S.set(E.FLOAT_VEC2,"vec2"),S.set(E.FLOAT_VEC3,"vec3"),S.set(E.FLOAT_VEC4,"vec4");var C=new Map;C.set(y.FLOAT,"float"),C.set(y.FLOAT_VEC2,"vec2"),C.set(y.FLOAT_VEC3,"vec3"),C.set(y.FLOAT_VEC4,"vec4"),C.set(y.FLOAT_MAT2,"mat2"),C.set(y.FLOAT_MAT3,"mat3"),C.set(y.FLOAT_MAT4,"mat4");var j=new Map;j.set(b.BOOL,"bool"),j.set(b.BYTE,"int"),j.set(b.SHORT,"int"),j.set(b.INT,"int"),j.set(b.UNSIGNED_BYTE,"uint"),j.set(b.UNSIGNED_SHORT,"uint"),j.set(b.UNSIGNED_INT,"uint"),j.set(b.SAMPLER_2D,"sampler2D"),j.set(b.SAMPLER_CUBE,"samplerCube"),j.set(b.FLOAT,"float"),j.set(b.FLOAT_VEC2,"vec2"),j.set(b.FLOAT_VEC3,"vec3"),j.set(b.FLOAT_VEC4,"vec4"),j.set(b.FLOAT_MAT2,"mat2"),j.set(b.FLOAT_MAT3,"mat3"),j.set(b.FLOAT_MAT4,"mat4");var D=function(){function t(e,r,n){Object(h.a)(this,t),this.uniformsDefinition=n,this.uniformSetters=new Map,this.attachProgram(e,r)}return Object(l.a)(t,[{key:"set",value:function(t,e){var r=this.uniformSetters.get(t);r&&r(e)}},{key:"exists",value:function(t){return this.uniformSetters.has(t)}},{key:"attachProgram",value:function(t,e){for(var r=0,n=Object.keys(this.uniformsDefinition);r<n.length;r++){var a=n[r];if(t.getUniformLocation(e,a)){var i=this.uniformsDefinition[a],o=!!(i.size&&i.size>1);switch(i.type){case b.BYTE:case b.UNSIGNED_BYTE:case b.SHORT:case b.UNSIGNED_SHORT:case b.INT:case b.UNSIGNED_INT:case b.SAMPLER_2D:case b.SAMPLER_CUBE:this.attachProgramInt(t,e,a,o);break;case b.FLOAT:this.attachProgramFloat(t,e,a,o);break;case b.FLOAT_VEC2:this.attachProgramVec2(t,e,a,o);break;case b.FLOAT_VEC3:this.attachProgramVec3(t,e,a,o);break;case b.FLOAT_VEC4:this.attachProgramVec4(t,e,a,o);break;case b.FLOAT_MAT2:this.attachProgramMat2(t,e,a,o);break;case b.FLOAT_MAT3:this.attachProgramMat3(t,e,a,o);break;case b.FLOAT_MAT4:this.attachProgramMat4(t,e,a,o);break;default:throw Error('[AbstractShader.attachProgram] Unknown type for uniform "'.concat(a,'": ').concat(i.type,"[").concat(i.size||1,"]!"))}}else V(a)}}},{key:"attachProgramInt",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);this.uniformSetters.set(r,n?function(e){return t.uniform1iv(a,e)}:function(e){return t.uniform1i(a,e)})}},{key:"attachProgramFloat",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);this.uniformSetters.set(r,n?function(e){return t.uniform1fv(a,e)}:function(e){return t.uniform1f(a,e)})}},{key:"attachProgramVec2",value:function(t,e,r,n){if(n)throw Error("You cannot use array of vec2!");var a=t.getUniformLocation(e,r);this.uniformSetters.set(r,(function(e){return t.uniform2fv(a,e)}))}},{key:"attachProgramVec3",value:function(t,e,r,n){if(n)throw Error("You cannot use array of vec3!");var a=t.getUniformLocation(e,r);this.uniformSetters.set(r,(function(e){return t.uniform3fv(a,e)}))}},{key:"attachProgramVec4",value:function(t,e,r,n){if(n)throw Error("You cannot use array of vec4!");var a=t.getUniformLocation(e,r);this.uniformSetters.set(r,(function(e){return t.uniform4fv(a,e)}))}},{key:"attachProgramMat2",value:function(t,e,r,n){if(n)throw Error("You cannot use array of mat2!");var a=t.getUniformLocation(e,r);this.uniformSetters.set(r,(function(e){return t.uniformMatrix2fv(a,!1,e)}))}},{key:"attachProgramMat3",value:function(t,e,r,n){if(n)throw Error("You cannot use array of mat3!");var a=t.getUniformLocation(e,r);this.uniformSetters.set(r,(function(e){return t.uniformMatrix3fv(a,!1,e)}))}},{key:"attachProgramMat4",value:function(t,e,r,n){if(n)throw Error("You cannot use array of mat4!");var a=t.getUniformLocation(e,r);this.uniformSetters.set(r,(function(e){return t.uniformMatrix4fv(a,!1,e)}))}}]),t}();function V(t){console.warn('Uniform "'.concat(t,'" has not been compiled in this program!')),console.warn("Shader compilation removes everything that is not used by the code.")}var P=Float32Array.BYTES_PER_ELEMENT,I=function(){function t(e,r,n){Object(h.a)(this,t),this.gl=e,this.prg=void 0,this.vertexShader=void 0,this.fragmentShader=void 0,this.attributes=[],this.uniformSetters=void 0,this.vertexShader=r,this.fragmentShader=n}return Object(l.a)(t,[{key:"bindAttribs",value:function(t){var e=this.gl,r=this.prg,n=this.attributes;if(!r)throw Error("This program has not been attached yet!");e.bindBuffer(e.ARRAY_BUFFER,t);var a,i=Object(R.a)(n);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.enableVertexAttribArray(o.location),e.vertexAttribPointer(o.location,o.size,e.FLOAT,o.normalization,o.totalSize,o.offset)}}catch(s){i.e(s)}finally{i.f()}}},{key:"attach",value:function(){var t=Object(f.a)(u.a.mark((function t(){var e,r,n,a,i,o,s,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.prg&&this.detach(),e=$(this.vertexShader),(r=$(this.fragmentShader)).attributes={},r.varyings=Object(k.a)(Object(k.a)({},e.varyings),r.varyings),t.next=7,G(e);case 7:return n=t.sent,t.next=10,z(r);case 10:if(a=t.sent,i=this.gl,o=B(i,n),s=N(i,a),c=i.createProgram()){t.next=17;break}throw Error("Unable to create a new WebGLProgram!");case 17:this.prg=c,i.attachShader(c,o),i.attachShader(c,s),i.linkProgram(c),this.prepareUniformsForFastBinding(e.attributes),this.uniformSetters=new D(this.gl,this.prg,Object(k.a)(Object(k.a)({},e.uniforms),r.uniforms));case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"detach",value:function(){var t=this.prg,e=this.gl;t&&(e.deleteProgram(t),delete this.prg)}},{key:"prepareUniformsForFastBinding",value:function(t){var e=this.gl,r=this.prg;if(!r)throw Error("This program has not been attached yet!");for(var n=[],a=0,i=0,o=Object.keys(t);i<o.length;i++){var s=o[i],c=t[s],u={location:e.getAttribLocation(r,s),offset:a,normalization:!1,size:U.getAttributeSize(c),totalSize:0,type:U.getWebGLTypeFromAttributeType(e,c)};n.push(u),a+=u.size*P}for(var f=a,h=0,l=n;h<l.length;h++){l[h].totalSize=f}this.attributes=n}},{key:"use",value:function(){var t=this.prg,e=this.gl;if(!t)throw Error("This program has not been attached yet!");e.useProgram(t)}},{key:"uniforms",get:function(){var t=this.uniformSetters;if(!t)throw Error("Can't get uniforms because the program has not been attached yet!\nprg.attach()");return t}}]),t}();function B(t,e){return X(t.VERTEX_SHADER,t,e)}function N(t,e){return X(t.FRAGMENT_SHADER,t,e)}function X(t,e,r){if(t!==e.VERTEX_SHADER&&t!==e.FRAGMENT_SHADER)throw Error("Type must be VERTEX_SHADER or FRAGMENT_SHADER!");var n=e.createShader(t);if(!n)throw Error("Unable to create a ".concat(t===e.VERTEX_SHADER?"VERTEX":"FRAGMENT"," shader!"));if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(n)||"NULL";throw console.error("An error occurred compiling the shader with the following code:"),console.info(function(t){var e,r=[],n=t.split("\n"),a=0,i=Object(R.a)(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;a++,r.push("".concat(at(a)," | ").concat(o))}}catch(s){i.e(s)}finally{i.f()}return r.join("\n")}(r)),console.error("Here is the error: ".concat(a)),console.info(function(t,e){var r=t.split(/\n\r?/);r.unshift(""),K.lastIndex=-1;var n=K.exec(e);if(!n)return t;for(var a=Object(M.a)(n,3)[2],i=Number(a),o=Math.max(1,i-2),s=Math.min(r.length-1,i+2),c=["Here is an extract of the shader code:"],u=o;u<=s;u++)c.push("| ".concat(u,":    ").concat(r[u]));return c.join("\n")}(r,a)),Error("Unable to create a ".concat(t===e.VERTEX_SHADER?"VERTEX":"FRAGMENT"," shader!"))}return n}function G(t){return Y.apply(this,arguments)}function Y(){return(Y=Object(f.a)(u.a.mark((function t(e){var r,n,a,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],(n=W(e.uniforms))&&r.push(n),(a=q(e.attributes))&&r.push(a),(i=Q(e.varyings))&&r.push(i),t.next=9,Z(e.functions);case 9:return o=t.sent,r.push(o),t.abrupt("return",r.join("\n"));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(t){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(u.a.mark((function t(e){var r,n,a,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=["precision mediump float;"],(n=W(e.uniforms))&&r.push(n),(a=Q(e.varyings))&&r.push(a),t.next=7,Z(e.functions);case 7:return i=t.sent,r.push(i),t.abrupt("return",r.join("\n"));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(t){return Object.keys(t).map((function(e){var r=t[e],n=U.getUniformTypeCodeName(r.type);if(!n)throw Error('Unknown type for uniform "'.concat(e,'": ').concat(r,"!"));var a=(r.size||0)>1?"[".concat(r.size,"]"):"";return"uniform ".concat(n," ").concat(e).concat(a,";")})).join("\n")}function Q(t){return Object.keys(t).map((function(e){var r=t[e],n=U.getVaryingTypeCodeName(r.type);if(!n)throw Error('Unknown type for varying "'.concat(e,'": ').concat(r,"!"));var a=(r.size||0)>1?"[".concat(r.size,"]"):"";return"varying ".concat(n," ").concat(e).concat(a,";")})).join("\n")}function q(t){return Object.keys(t).map((function(e){var r=t[e],n=U.getAttributeTypeCodeName(r);if(!n)throw Error('Unknown type for attribute "'.concat(e,'": ').concat(r,"!"));return"attribute ".concat(n," ").concat(e,";")})).join("\n")}function Z(t){return J.apply(this,arguments)}function J(){return(J=Object(f.a)(u.a.mark((function t(e){var r,n,a,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],n=Object.keys(e);case 2:if(!(n.length>0)){t.next=17;break}if(a=n.pop()){t.next=6;break}return t.abrupt("break",17);case 6:if(i=e[a],!Array.isArray(i)){t.next=11;break}r.push.apply(r,Object(x.a)(i)),t.next=15;break;case 11:return t.next=13,p.loadText(i);case 13:o=t.sent,r.push(o);case 15:t.next=2;break;case 17:return t.abrupt("return",r.join("\n"));case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var K=/ERROR: ([0-9]+):([0-9]+):/g;function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{var r={attributes:Object(k.a)({},t.attributesDefinition),functions:Object(k.a)({},t.functionsDefinition),uniforms:Object(k.a)({},t.uniformsDefinition),varyings:Object(k.a)({},t.varyingsDefinition)};if(0===e.length&&"undefined"===typeof r.functions.main)throw Error("A shader must have a 'void main()' function!");e.push(t);var n,a=Object(R.a)(t.dependenciesDefinition);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(-1===e.indexOf(i)){var o={attributes:Object(k.a)({},i.attributesDefinition),functions:Object(k.a)({},i.functionsDefinition),uniforms:Object(k.a)({},i.uniformsDefinition),varyings:Object(k.a)({},i.varyingsDefinition)};delete o.functions.main,et(r.attributes,o.attributes),rt(r.uniforms,o.uniforms),nt(r.varyings,o.varyings),tt(r.functions,o.functions)}}}catch(s){a.e(s)}finally{a.f()}return r}catch(c){throw Error("Error in ".concat(t.constructor.name,":\n").concat(c))}}function tt(t,e){for(var r=0,n=Object.keys(e);r<n.length;r++){var a=n[r],i=t[a],o=e[a];i||(t[a]=o)}}function et(t,e){for(var r=0,n=Object.keys(e);r<n.length;r++){var a=n[r],i=t[a],o=e[a];if(i){if(i!==o)throw Error('Attribute "'.concat(a,'" is redeclared in a dependency, but with a different type!'))}else t[a]=o}}function rt(t,e){for(var r=0,n=Object.keys(e);r<n.length;r++){var a=n[r],i=t[a],o=e[a];if(i){if(i.type!==o.type)throw Error('Uniform "'.concat(a,'" is redeclared in a dependency, but with a different type!'));if((i.size||1)!==(o.size||1))throw Error('Uniform "'.concat(a,'[]" is redeclared in a dependency, but with a different number of items!'))}else t[a]=o}}function nt(t,e){for(var r=0,n=Object.keys(e);r<n.length;r++){var a=n[r],i=t[a],o=e[a];if(i){if(i.type!==o.type)throw Error('Varying "'.concat(a,'" is redeclared in a dependency, but with a different type!'));if((i.size||1)!==(o.size||1))throw Error('Varying "'.concat(a,'[]" is redeclared in a dependency, but with a different number of items!'))}else t[a]=o}}function at(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r="".concat(t);r.length<e;)r=" ".concat(r);return r}var it=function(t){return new st(t)},ot=function(t){return new st(t)},st=function(t){Object(v.a)(r,t);var e=Object(d.a)(r);function r(t){var n;return Object(h.a)(this,r),(n=e.call(this)).definition=void 0,n.definition={uniforms:ct(t.uniforms),attributes:ft(t.attributes),varyings:lt(t.varyings),functions:t.functions||{},dependencies:t.dependencies||[]},n}return Object(l.a)(r,[{key:"uniformsDefinition",get:function(){return this.definition.uniforms}},{key:"attributesDefinition",get:function(){return this.definition.attributes}},{key:"varyingsDefinition",get:function(){return this.definition.varyings}},{key:"functionsDefinition",get:function(){return this.definition.functions}},{key:"dependenciesDefinition",get:function(){return this.definition.dependencies}}]),r}((function t(){Object(h.a)(this,t)}));function ct(t){if(!t)return{};for(var e={},r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];e[a]=ut(t[a])}return e}function ut(t){if(!Array.isArray(t))return ut([t,1]);var e=Object(M.a)(t,2),r=e[0],n=e[1];switch(r){case"vec2":return{type:b.FLOAT_VEC2,size:n};case"vec3":return{type:b.FLOAT_VEC3,size:n};case"vec4":return{type:b.FLOAT_VEC4,size:n};case"mat2":return{type:b.FLOAT_MAT2,size:n};case"mat3":return{type:b.FLOAT_MAT3,size:n};case"mat4":return{type:b.FLOAT_MAT4,size:n};case"sampler2D":return{type:b.SAMPLER_2D,size:n};case"samplerCube":return{type:b.SAMPLER_CUBE,size:n};default:return{type:b.FLOAT,size:n}}}function ft(t){if(!t)return{};for(var e={},r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];e[a]=ht(t[a])}return e}function ht(t){switch(t){case"vec2":return E.FLOAT_VEC2;case"vec3":return E.FLOAT_VEC3;case"vec4":return E.FLOAT_VEC4;default:return E.FLOAT}}function lt(t){if(!t)return{};for(var e={},r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];e[a]=vt(t[a])}return e}function vt(t){if(!Array.isArray(t))return vt([t,1]);var e=Object(M.a)(t,2),r=e[0],n=e[1];switch(r){case"vec2":return{type:y.FLOAT_VEC2,size:n};case"vec3":return{type:y.FLOAT_VEC3,size:n};case"vec4":return{type:y.FLOAT_VEC4,size:n};case"mat2":return{type:y.FLOAT_MAT2,size:n};case"mat3":return{type:y.FLOAT_MAT3,size:n};case"mat4":return{type:y.FLOAT_MAT4,size:n};default:return{type:y.FLOAT,size:n}}}for(var dt=function t(){Object(h.a)(this,t)},mt=new Float32Array(4096),pt=new Float32Array(4096),gt=0;gt<4096;gt++){var Tt=Math.PI*gt/2048;mt[gt]=Math.cos(Tt),pt[gt]=Math.sin(Tt)}var At={areEqual:function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0},createVec3:function(){return new Float32Array(3)},createVec4:function(){return new Float32Array(4)},cross3:function(t,e,r){r[0]=t[1]*e[2]-t[2]*e[1],r[1]=t[2]*e[0]-t[0]*e[2],r[2]=t[0]*e[1]-t[1]*e[0]},dot3:function(t,e){var r=Object(M.a)(t,3),n=r[0],a=r[1],i=r[2],o=Object(M.a)(e,3);return n*o[0]+a*o[1]+i*o[2]},length3:function(t){return Math.sqrt(At.dot3(t,t))},normalize3:function(t,e){var r=At.length3(t);e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r},orbital3:function(t,e,r){var n=Math.sin(t),a=Math.cos(t),i=e-.5*Math.PI;r[0]=a*Math.cos(i),r[1]=a*Math.sin(i),r[2]=n},length4:function(t){var e=Object(M.a)(t,4),r=e[0],n=e[1],a=e[2],i=e[3];return Math.sqrt(r*r+n*n+a*a+i*i)},normalize4:function(t,e){var r=At.length4(t);e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r},transform4:function(t,e,r){r[0]=t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],r[1]=t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],r[2]=t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],r[3]=t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3]}},Et={areEqual:At.areEqual,createMat3:function(){return new Float32Array(9)},createMat4:function(){return new Float32Array(16)},identity3:function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1},extract3From4:function(t,e){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10]},multiply3:function(t,e,r){r[0]=t[0]*e[0]+t[3]*e[1]+t[6]*e[2],r[1]=t[1]*e[0]+t[4]*e[1]+t[7]*e[2],r[2]=t[2]*e[0]+t[5]*e[1]+t[8]*e[2],r[3]=t[0]*e[3]+t[3]*e[4]+t[6]*e[5],r[4]=t[1]*e[3]+t[4]*e[4]+t[7]*e[5],r[5]=t[2]*e[3]+t[5]*e[4]+t[8]*e[5],r[6]=t[0]*e[6]+t[3]*e[7]+t[6]*e[8],r[7]=t[1]*e[6]+t[4]*e[7]+t[7]*e[8],r[8]=t[2]*e[6]+t[5]*e[7]+t[8]*e[8]},identity4:function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},multiply4:function(t,e,r){var n=t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],a=t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],i=t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],o=t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],s=t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],c=t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],u=t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],f=t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],h=t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],l=t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],v=t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],d=t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],m=t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],p=t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],g=t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],T=t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15];r[0]=n,r[1]=a,r[2]=i,r[3]=o,r[4]=s,r[5]=c,r[6]=u,r[7]=f,r[8]=h,r[9]=l,r[10]=v,r[11]=d,r[12]=m,r[13]=p,r[14]=g,r[15]=T},invert4:function(t,e){var r=Object(M.a)(t,16),n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],c=r[5],u=r[6],f=r[7],h=r[8],l=r[9],v=r[10],d=r[11],m=r[12],p=r[13],g=r[14],T=r[15],A=n*c-s*a,E=n*l-h*a,b=n*p-m*a,y=s*l-h*c,_=s*p-m*c,O=h*p-m*l,w=i*f-u*o,x=i*d-v*o,L=i*T-g*o,F=u*d-v*f,k=u*T-g*f,R=v*T-g*d,U=A*R-E*k+b*F+y*L-_*x+O*w;if(Math.abs(U)<1e-8)return!1;var S=1/U;return e[0]=(c*R-l*k+p*F)*S,e[4]=(h*k-s*R-m*F)*S,e[8]=(f*O-d*_+T*y)*S,e[12]=(v*_-u*O-g*y)*S,e[1]=(l*L-a*R-p*x)*S,e[5]=(n*R-h*L+m*x)*S,e[9]=(d*b-o*O-T*E)*S,e[13]=(i*O-v*b+g*E)*S,e[2]=(a*k-c*L+p*w)*S,e[6]=(s*L-n*k-m*w)*S,e[10]=(o*_-f*b+T*A)*S,e[14]=(u*b-i*_-g*A)*S,e[3]=(c*x-a*F-l*w)*S,e[7]=(n*F-s*x+h*w)*S,e[11]=(f*E-o*y-d*A)*S,e[15]=(i*y-u*E+v*A)*S,!0},rotation4X:function(t,e){var r=Math.cos(t),n=Math.sin(t);e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1},rotation4Y:function(t,e){var r=Math.cos(t),n=Math.sin(t);e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1},rotation4Z:function(t,e){var r=Math.cos(t),n=Math.sin(t);e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}};var bt={deg2rad:function(t){return t*Math.PI/180},rad2deg:function(t){return 180*t/Math.PI},cos:function(t){return mt[4095&(0|t)]},sin:function(t){return pt[4095&(0|t)]},clamp:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<e?e:t>r?r:t},vector:At,matrix:Et,M4_00:0,M4_10:1,M4_20:2,M4_30:3,M4_01:4,M4_11:5,M4_21:6,M4_31:7,M4_02:8,M4_12:9,M4_22:10,M4_32:11,M4_03:12,M4_13:13,M4_23:14,M4_33:15,M3_00:0,M3_10:1,M3_20:2,M3_01:3,M3_11:4,M3_21:5,M3_02:6,M3_12:7,M3_22:8},yt=(Math.PI,function(t){Object(v.a)(r,t);var e=Object(d.a)(r);function r(){var t;Object(h.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).cameraMatrix=bt.matrix.createMat4(),t.rotationY=bt.matrix.createMat4(),t.rotationX=bt.matrix.createMat4(),t.transfo=bt.matrix.createMat4(),t}return Object(l.a)(r,[{key:"extractCameraMatrix",value:function(t){bt.matrix.extract3From4(this.cameraMatrix,t)}},{key:"orbit",value:function(t,e,r,n,a,i){var o=this.rotationY,s=this.rotationX,c=this.cameraMatrix,u=bt.clamp(a,-1.570796326794896,1.570796326794896),f=i;bt.matrix.rotation4X(-u,s),bt.matrix.rotation4Y(f,o),bt.matrix.multiply4(o,s,c);var h=Math.cos(u),l=t+n*h*Math.sin(f),v=r+n*Math.sin(u),d=e+n*h*Math.cos(f);console.info("tX, tY, tZ=",l,v,d),console.info("rotationX=",s),c[bt.M4_03]=-l,c[bt.M4_13]=-v,c[bt.M4_23]=-d}}]),r}(dt)),_t=r(19),Ot=r.n(_t),wt=10*Math.PI/180,Mt=it({uniforms:{uniPerspectiveMatrix:"mat4",uniCameraMatrix:"mat4"},functions:{worldPointToScreen:Ot.a}}),xt=function(t){Object(v.a)(r,t);var e=Object(d.a)(r);function r(){var t;Object(h.a)(this,r),(t=e.call(this)).perspectiveMatrix=new Float32Array(16),t.fieldAngle=wt,t.near=.1,t.far=1e3;return t.orbit(0,0,0,15,0,0),t}return Object(l.a)(r,[{key:"setUniformValues",value:function(t,e,r){var n=this.near,a=this.far,i=this.fieldAngle,o=Math.tan(.5*(Math.PI-i)),s=1/(n-a),c=this.perspectiveMatrix;c[bt.M4_00]=o*r/e,c[bt.M4_10]=0,c[bt.M4_20]=0,c[bt.M4_30]=0,c[bt.M4_01]=0,c[bt.M4_11]=o,c[bt.M4_21]=0,c[bt.M4_31]=0,c[bt.M4_02]=0,c[bt.M4_12]=0,c[bt.M4_22]=(n+a)*s,c[bt.M4_32]=-1,c[bt.M4_03]=0,c[bt.M4_13]=0,c[bt.M4_23]=n*a*s*2,c[bt.M4_33]=0,t.use(),t.uniforms.set("uniCameraMatrix",this.cameraMatrix),t.uniforms.set("uniPerspectiveMatrix",this.perspectiveMatrix)}},{key:"vertexShader",get:function(){return r.VertexShader}}]),r}(yt);xt.VertexShader=Mt;var Lt=r(20),Ft=r.n(Lt),kt=r(21),Rt=r.n(kt);console.info("PerspectiveCamera.VertexShader=",xt.VertexShader);var Ut={vert:it({attributes:{attLocation:"vec3",attUV:"vec2",attNormal:"vec3",attValley:"vec3",attWeight:"vec3"},varyings:{varNormal:"vec3",varValley:"vec3",varWeight:"vec3",varUV:"vec2"},functions:{main:Rt.a},dependencies:[xt.VertexShader]}),frag:ot({uniforms:{uniTexture:"sampler2D",uniThickness:"float",uniSmoothness:"float"},functions:{main:Ft.a}})},St=r(17),Ct=r.n(St),jt=function(){function t(e){Object(h.a)(this,t),this.scene=e,this.infoMap=new F,this.programMap=new F,this.textureMap=new F}return Object(l.a)(t,[{key:"createAsync",value:function(){var t=Object(f.a)(u.a.mark((function t(e){var r,n,a,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.scene,n=this.infoMap,a=this.programMap,i=this.textureMap,n.exists(e)){t.next=5;break}return t.next=5,this.createInfo(e);case 5:if(a.exists(e)){t.next=8;break}return t.next=8,this.createProgram("model");case 8:if(i.exists(e)){t.next=11;break}return t.next=11,this.createTexture(Ct.a);case 11:return o=n.get(e),t.abrupt("return",new L({gl:r.gl,name:o.name,attributesCount:o.attributesCount,buffer:o.buffer,program:a.get("model"),texture:i.get(Ct.a)}));case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createInfo",value:function(){var t=Object(f.a)(u.a.mark((function t(e){var r,n,a,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.scene.gl,t.next=3,p.loadJson(e);case 3:if(n=t.sent,a=r.createBuffer()){t.next=7;break}throw Error("Unable to create a new WebGLBuffer!");case 7:return i=Dt(n.data),r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,i,r.STATIC_DRAW),o={attributesCount:Math.floor(n.data.length/n.attributes.length),buffer:a,name:n.name},this.infoMap.add(e,o),t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createProgram",value:function(){var t=Object(f.a)(u.a.mark((function t(e){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.scene.gl,n=new I(r,Ut.vert,Ut.frag),this.programMap.add(e,n),t.next=5,n.attach();case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createTexture",value:function(){var t=Object(f.a)(u.a.mark((function t(e){var r,n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.scene,n=this.textureMap,t.next=3,r.textures.createImageTextureAsync(e);case 3:return a=t.sent,n.add(e,a),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();function Dt(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=[],n=0,a=3*e;n<t.length;){var i=t.slice(n,n+a);r.push.apply(r,Object(x.a)(Vt(i))),n+=a}return new Float32Array(r)}function Vt(t){var e=Object(M.a)(t,24),r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],u=e[7],f=e[8],h=e[9],l=e[10],v=e[11],d=e[12],m=e[13],p=e[14],g=e[15],T=e[16],A=e[17],E=e[18],b=e[19],y=e[20],_=e[21],O=e[22],w=e[23];return[r,n,a,i,o,s,c,u,0,0,0,Pt(r,n,f,h,T,A),0,0,f,h,l,v,d,m,p,g,0,0,0,0,Pt(f,h,T,A,r,n),0,T,A,E,b,y,_,O,w,0,0,0,0,0,Pt(T,A,r,n,f,h)]}function Pt(t,e,r,n,a,i){var o,s,c,u,f=(o=r,s=n,c=a,u=i,Math.sqrt(function(t,e,r,n){var a=t-r,i=e-n;return a*a+i*i}(o,s,c,u)));if(0===f)return 0;var h=(t-r)*(i-n)-(e-n)*(a-r);return Math.abs(h/f)}r(59);var It=n.a.View.Slider,Bt=function(t){Object(v.a)(r,t);var e=Object(d.a)(r);function r(){var t;Object(h.a)(this,r);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={thickness:.1,smoothness:.5,latitude:5,longitude:0,distance:16},t.refCanvas=i.a.createRef(),t.scene=void 0,t.camera=new xt,t.refresh=n.a.Throttler((function(){var e=t.state,r=e.distance,n=e.latitude,a=e.longitude;t.camera.orbit(0,0,0,r,bt.deg2rad(n),bt.deg2rad(a)),t.scene&&t.scene.refresh()}),50),t}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var t=Object(f.a)(u.a.mark((function t(){var e,r,n,a,i,o=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.refCanvas.current){t.next=3;break}return t.abrupt("return");case 3:return r=new w(e),n=new jt(r),t.next=7,n.createAsync("./mesh/Car.json");case 7:a=t.sent,i=r.gl,r.onAnimation=function(t,e,r){i.clearColor(.3,.3,.4,1),i.clearDepth(1),i.depthFunc(i.LESS),i.enable(i.DEPTH_TEST),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),o.camera.setUniformValues(a.program,e,r),a.paint()},this.scene=r,r.isRendering=!1,this.refresh();case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.refresh()}},{key:"render",value:function(){var t=this,e=["App","thm-bg0"];return this.props.className&&e.push(this.props.className),i.a.createElement("div",{className:e.join(" ")},i.a.createElement("div",{className:"controls"},i.a.createElement("canvas",{ref:this.refCanvas}),i.a.createElement(It,{label:"Latitude",min:-89,max:89,step:1,value:this.state.latitude,onChange:function(e){return t.setState({latitude:e})}}),i.a.createElement(It,{label:"Longitude",min:-180,max:180,step:1,value:this.state.longitude,onChange:function(e){return t.setState({longitude:e})}}),i.a.createElement(It,{label:"Distance",min:1,max:50,step:1,value:this.state.distance,onChange:function(e){return t.setState({distance:e})}})))}}]),r}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.Theme.register("default",{bg0:"#222",bg3:"#555"}),n.a.Theme.apply("default"),n.a.Font.loadJosefin(),s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Bt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.a2c31946.chunk.js.map